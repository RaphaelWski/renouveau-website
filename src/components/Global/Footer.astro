---
import { getCollection } from "astro:content";

// Get the office hours from the siteInfo collection
let officeHours;
try {
  const siteInfoEntries = await getCollection("siteInfo");
  officeHours = siteInfoEntries.find((entry) => entry.id === "office-hours");
} catch (error) {
  // Collection might not exist yet when first setting up the project
  console.log("Office hours not found or collections not yet available");
}

// Footer navigation groups
const footerNavs = [
  {
    title: "À propos",
    items: [
      { text: "Qui sommes-nous ?", href: "/about-us" },
      { text: "Nouveau ici ?", href: "/im-new" },
      { text: "Équipe", href: "/staff" },
      { text: "Contact", href: "/contact" },
    ],
  },
  {
    title: "Ressources",
    items: [
      { text: "Prédications", href: "/sermons" },
      { text: "Événements", href: "/events" },
      { text: "Blog", href: "/blog" },
      { text: "Ministères", href: "/ministries" },
    ],
  },
  {
    title: "Connecter",
    items: [
      { text: "Faire un don", href: "/giving" },
      { text: "Sujet de prière", href: "/contact#prayer" },
      { text: "Newsletter", href: "/contact#newsletter" },
      { text: "Je veux servir", href: "/im-new#volunteer" },
    ],
  },
];

// Social media links
const socialLinks = [
  {
    name: "Facebook",
    href: "https://facebook.com/yourchurch",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
          </svg>`,
  },
  {
    name: "Instagram",
    href: "https://instagram.com/yourchurch",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
          </svg>`,
  },
  {
    name: "YouTube",
    href: "https://youtube.com/yourchurch",
    icon: `<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
          </svg>`,
  },
];

// Current year for copyright
const currentYear = new Date().getFullYear();

// Render office hours content if available
let OfficeHoursContent = null;
if (officeHours) {
  const { Content } = await officeHours.render();
  OfficeHoursContent = Content;
}
---

<footer class="bg-gray-900 text-white pt-16 pb-8">
  <div class="container">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12">
      <!-- Church Info -->
      <div>
        <div class="mb-4">
          <a
            href="/"
            class="text-2xl font-bold text-white font-serif inline-flex items-center"
          >
            <span class="sr-only">Église Renouveau</span>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 1024.000000 1024.000000"
              class="h-24 w-auto text-white mr-2"
              preserveAspectRatio="xMidYMid meet"
            >
              <g
                transform="translate(0.000000,1024.000000) scale(0.100000,-0.100000)"
                fill="currentColor"
                stroke="none"
              >
                <path
                  d="M4915 8773 c-229 -14 -453 -47 -645 -95 -1377 -342 -2387 -1528
-2521 -2960 -15 -165 -6 -612 15 -763 24 -163 63 -353 102 -484 67 -227 183
-507 206 -498 21 7 14 33 -56 202 -163 400 -236 781 -236 1238 0 550 116 1046
354 1514 174 343 435 687 710 934 547 494 1208 783 1944 849 170 16 605 7 757
-14 615 -88 1141 -309 1627 -683 137 -106 437 -402 540 -533 295 -374 492
-823 584 -1335 26 -143 26 -511 1 -645 -37 -194 -110 -372 -218 -530 -77 -112
-122 -164 -309 -357 -327 -335 -415 -463 -546 -795 -167 -424 -411 -809 -709
-1117 -148 -153 -351 -331 -379 -331 -75 0 -317 76 -612 194 -340 134 -461
161 -734 160 -193 -1 -174 1 -550 -72 -64 -13 -141 -17 -310 -17 -207 1 -234
3 -335 27 -320 76 -605 234 -888 492 -111 102 -352 364 -361 394 -9 28 -3 28
78 -3 77 -29 297 -70 323 -61 43 17 -41 60 -421 212 -205 83 -256 97 -256 71
0 -26 71 -273 124 -432 68 -203 94 -265 114 -265 13 0 14 15 9 106 -4 59 -16
147 -28 196 -12 49 -18 92 -15 95 10 10 36 -18 103 -112 263 -367 606 -690
1000 -938 134 -84 495 -264 626 -312 203 -74 472 -142 684 -172 169 -25 685
-24 866 0 623 84 1183 327 1694 733 126 100 417 392 514 514 356 451 604 966
704 1465 85 424 92 910 19 1305 -95 519 -326 1041 -651 1472 -297 395 -692
730 -1128 959 -534 281 -1208 428 -1790 392z m3512 -2985 c-3 -8 -6 -5 -6 6
-1 11 2 17 5 13 3 -3 4 -12 1 -19z m60 -50 c-3 -7 -5 -2 -5 12 0 14 2 19 5 13
2 -7 2 -19 0 -25z m-30 0 c-3 -8 -6 -5 -6 6 -1 11 2 17 5 13 3 -3 4 -12 1 -19z
m-27 -466 c-19 -240 -67 -461 -137 -637 -62 -156 -352 -717 -521 -1005 -87
-149 -228 -354 -337 -490 -112 -141 -352 -387 -464 -476 -166 -132 -428 -304
-464 -304 -6 0 29 27 78 60 318 218 584 479 827 812 130 178 191 280 410 683
35 66 127 221 203 345 165 269 231 392 279 523 79 212 114 416 124 727 l7 215
3 -160 c2 -88 -2 -220 -8 -293z m44 73 c-20 -511 -108 -825 -388 -1385 -219
-438 -443 -757 -741 -1056 -157 -158 -279 -260 -430 -361 -81 -55 -275 -163
-291 -163 -4 0 29 23 72 51 387 253 715 590 990 1016 119 184 493 871 585
1076 136 301 187 570 191 991 1 201 1 201 9 81 5 -66 6 -178 3 -250z m32 -50
c-9 -409 -70 -747 -198 -1095 -180 -486 -445 -906 -793 -1255 -208 -209 -480
-422 -522 -409 -13 4 -14 3 -5 -4 11 -7 6 -14 -20 -29 -69 -40 -320 -165 -324
-161 -2 3 8 11 24 19 59 30 212 125 302 187 396 272 777 724 1064 1261 208
390 352 752 409 1026 44 207 52 303 52 600 0 214 2 259 8 190 5 -49 6 -198 3
-330z m-99 228 c-17 -476 -101 -764 -332 -1138 -162 -264 -213 -351 -307 -525
-282 -523 -526 -855 -835 -1132 -128 -115 -332 -271 -440 -336 -79 -48 -122
-54 -52 -8 191 126 492 395 648 580 204 242 346 461 524 806 131 256 174 328
335 558 338 486 427 725 448 1215 4 86 9 157 12 157 3 0 2 -80 -1 -177z m-31
10 c-15 -245 -45 -409 -103 -577 -65 -189 -141 -319 -416 -717 -84 -123 -151
-237 -239 -414 -275 -548 -582 -944 -975 -1260 -132 -106 -297 -219 -313 -213
-6 2 37 40 97 84 290 217 532 475 755 804 123 180 184 289 311 552 145 298
177 348 457 708 277 356 377 599 412 998 7 78 14 142 17 142 2 0 1 -48 -3
-107z m-29 10 c-3 -10 -5 -2 -5 17 0 19 2 27 5 18 2 -10 2 -26 0 -35z m-27
-210 c-53 -320 -152 -516 -455 -903 -183 -235 -266 -367 -374 -596 -109 -229
-194 -385 -294 -534 -191 -286 -369 -494 -582 -680 -103 -89 -341 -270 -356
-270 -21 0 -3 19 74 77 415 312 803 826 1042 1378 128 296 186 383 509 761
137 161 236 297 294 404 66 122 126 321 149 496 6 44 9 51 11 27 2 -18 -6 -90
-18 -160z m-74 -136 c-76 -227 -152 -345 -450 -695 -247 -290 -313 -394 -455
-717 -174 -398 -425 -769 -721 -1066 -162 -163 -400 -364 -421 -357 -6 2 31
40 82 83 209 179 415 404 563 614 156 222 308 503 400 741 65 168 97 235 159
335 81 131 160 225 381 454 283 294 406 467 467 659 13 41 25 69 27 63 2 -5
-13 -57 -32 -114z m-5075 -2413 c81 -41 269 -111 359 -134 265 -68 500 -67
865 4 214 41 298 49 460 43 222 -9 349 -40 639 -154 316 -124 528 -193 593
-193 32 0 37 -17 9 -35 -22 -15 -33 -14 -149 9 -69 14 -244 64 -389 112 -428
139 -560 167 -813 167 -127 1 -200 -5 -355 -28 -165 -25 -225 -30 -385 -29
-167 0 -205 4 -320 28 -75 15 -178 46 -245 73 -112 45 -370 169 -370 178 0 6
40 -9 101 -41z m97 -191 c203 -119 391 -195 596 -240 117 -25 133 -26 516 -29
437 -3 527 -11 822 -69 225 -44 432 -74 578 -83 l115 -7 -32 -18 c-56 -30
-366 -20 -694 23 -324 42 -422 50 -679 60 -295 11 -410 22 -549 52 -237 50
-487 166 -777 360 -105 70 -197 134 -205 144 -7 9 38 -18 101 -61 63 -42 157
-102 208 -132z m166 26 c197 -76 455 -118 656 -105 58 4 186 19 285 33 142 22
218 27 360 27 256 1 364 -21 755 -149 233 -76 376 -115 493 -136 63 -10 67
-13 53 -27 -10 -11 -30 -15 -58 -13 -98 5 -344 55 -581 115 -445 115 -605 132
-977 101 -530 -44 -818 15 -1235 254 -157 90 -151 92 19 6 82 -41 185 -89 230
-106z m-249 71 c222 -128 385 -193 594 -237 109 -23 151 -26 311 -27 102 -1
262 5 356 13 197 16 431 10 569 -14 50 -9 212 -47 360 -85 231 -58 332 -79
575 -116 l35 -6 -29 -15 c-51 -27 -309 -1 -676 67 -394 73 -380 72 -850 80
-462 8 -514 13 -694 65 -119 35 -225 78 -352 145 -112 58 -354 207 -354 217 0
3 10 -1 23 -9 12 -8 72 -43 132 -78z m68 -138 c146 -96 366 -204 509 -251 203
-65 341 -83 785 -101 169 -7 325 -21 515 -45 263 -34 646 -61 695 -49 49 13
20 -5 -44 -27 -64 -21 -84 -23 -348 -23 -232 0 -342 6 -645 32 -472 42 -592
57 -720 88 -277 70 -570 221 -902 467 -64 47 -119 90 -123 96 -3 6 35 -18 85
-54 50 -36 137 -96 193 -133z m3317 -212 c-8 -5 -22 -10 -30 -10 -13 0 -13 1
0 10 8 5 22 10 30 10 13 0 13 -1 0 -10z m-420 -20 c-33 -26 -52 -25 -21 0 13
11 28 20 35 20 6 0 0 -9 -14 -20z m50 -10 c-33 -26 -52 -25 -21 0 13 11 28 20
35 20 6 0 0 -9 -14 -20z m90 12 c0 -10 -44 -32 -63 -32 -7 0 2 9 18 20 32 22
45 25 45 12z m90 3 c0 -8 -61 -36 -72 -33 -6 2 4 12 23 21 35 17 49 21 49 12z
m79 2 c-2 -2 -17 -11 -34 -21 l-30 -17 24 20 c13 12 28 21 34 21 6 0 8 -1 6
-3z m32 -27 c-24 -11 -46 -20 -50 -20 -12 1 64 39 79 39 8 0 -5 -8 -29 -19z
m-115 -25 c-11 -8 -27 -15 -35 -15 -10 1 -7 6 9 15 33 19 50 18 26 0z m-296
-9 c0 -2 -7 -7 -16 -10 -8 -3 -12 -2 -9 4 6 10 25 14 25 6z m36 -11 c-11 -8
-25 -15 -30 -15 -6 0 -2 7 8 15 11 8 25 15 30 15 6 0 2 -7 -8 -15z m74 0 c-33
-19 -46 -19 -30 0 7 8 22 15 34 15 20 -1 20 -2 -4 -15z m80 5 c-20 -13 -33
-13 -25 0 3 6 14 10 23 10 15 0 15 -2 2 -10z m25 -30 c-3 -5 -14 -10 -23 -10
-15 0 -15 2 -2 10 20 13 33 13 25 0z m-265 -30 c-24 -15 -37 -11 -16 5 11 8
22 12 25 9 3 -3 -1 -9 -9 -14z m75 10 c-3 -5 -12 -10 -18 -10 -7 0 -6 4 3 10
19 12 23 12 15 0z m75 0 c-8 -5 -22 -10 -30 -10 -13 0 -13 1 0 10 8 5 22 10
30 10 13 0 13 -1 0 -10z m-2170 -64 c91 -25 246 -44 635 -76 204 -16 385 -33
404 -36 19 -3 145 -6 280 -6 l246 -1 -113 -28 c-179 -44 -352 -63 -519 -55
-191 8 -347 29 -533 72 -148 34 -490 139 -490 150 0 3 8 3 18 0 9 -3 42 -12
72 -20z m1930 4 c-8 -5 -19 -10 -25 -10 -5 0 -3 5 5 10 8 5 20 10 25 10 6 0 3
-5 -5 -10z m60 6 c0 -2 -7 -7 -16 -10 -8 -3 -12 -2 -9 4 6 10 25 14 25 6z"
                ></path>
                <path
                  d="M6600 8027 c0 -9 -5 -17 -12 -19 -8 -3 -7 -53 5 -199 17 -195 44
-578 49 -678 l2 -54 -268 -58 c-413 -88 -485 -108 -502 -135 -9 -13 -13 -27
-10 -33 3 -5 0 -11 -6 -14 -15 -5 24 -47 44 -47 8 0 6 -5 -5 -11 -12 -7 -15
-17 -11 -35 4 -15 2 -24 -5 -24 -8 0 -7 -6 1 -20 7 -11 19 -20 27 -20 11 0 10
-4 -4 -13 -10 -8 -14 -17 -9 -20 6 -3 177 36 382 88 205 51 374 90 376 86 4
-7 11 -395 27 -1426 6 -385 14 -727 19 -760 4 -33 7 185 6 485 -1 300 1 523 4
495 l6 -50 7 60 c5 33 7 79 6 102 -2 23 0 46 4 49 9 9 7 -331 -2 -474 -3 -57
-3 -110 0 -120 8 -23 19 173 19 341 0 77 3 138 6 135 3 -4 6 -75 6 -160 1
-182 12 -123 22 121 4 85 8 157 11 159 2 2 5 -68 7 -156 2 -88 0 -158 -4 -155
-5 2 -7 -24 -6 -59 l2 -63 3 53 c2 28 8 52 13 52 10 0 4 -210 -11 -363 -13
-140 -10 -191 6 -92 7 44 18 172 25 285 6 113 13 212 15 220 2 8 2 -91 0 -220
-4 -272 7 -236 25 80 7 113 14 225 15 250 10 149 15 877 8 1045 -5 110 -6 207
-2 215 10 21 105 43 384 90 132 22 245 42 250 45 26 10 -57 3 -240 -20 -110
-14 -222 -28 -250 -30 -66 -6 273 51 393 66 50 6 92 15 92 19 0 4 27 13 60 19
33 7 60 15 60 18 0 3 -30 3 -67 0 l-68 -5 50 12 c28 7 59 18 70 24 11 6 40 15
65 21 37 8 24 9 -65 5 -60 -3 -119 -8 -130 -11 -14 -3 -17 -2 -10 5 6 6 36 15
68 21 95 17 97 28 5 25 l-83 -3 60 14 60 14 -95 -5 c-52 -2 -122 -9 -155 -14
-196 -31 -458 -61 -464 -54 -4 5 -20 162 -35 349 -29 359 -42 471 -58 495 -7
11 -8 10 -5 -7 3 -13 1 -23 -4 -23 -5 0 -9 6 -9 13 0 7 -7 22 -16 33 -15 19
-15 19 -6 -1 5 -11 10 -40 11 -65 1 -25 5 -53 8 -64 3 -12 1 -16 -6 -12 -6 4
-11 17 -11 30 0 37 -29 122 -50 148 -17 20 -19 20 -13 3 5 -16 4 -18 -8 -9 -8
7 -29 15 -46 19 -26 5 -33 3 -33 -8z m135 -2012 c0 -58 -3 -105 -7 -105 -9 0
-10 155 -2 188 4 12 7 22 8 22 0 0 1 -47 1 -105z m62 -107 c-2 -13 -4 -5 -4
17 -1 22 1 32 4 23 2 -10 2 -28 0 -40z m-60 -85 c-3 -10 -5 -4 -5 12 0 17 2
24 5 18 2 -7 2 -21 0 -30z m90 -205 c-3 -7 -5 -2 -5 12 0 14 2 19 5 13 2 -7 2
-19 0 -25z m33 -40 c0 -25 -4 -38 -9 -32 -8 8 -4 74 5 74 2 0 4 -19 4 -42z
m-43 -90 c-3 -8 -6 -5 -6 6 -1 11 2 17 5 13 3 -3 4 -12 1 -19z"
                ></path>
                <path
                  d="M6723 5480 c0 -36 2 -50 4 -32 2 17 2 47 0 65 -2 17 -4 3 -4 -33z"
                ></path>
                <path
                  d="M6762 5270 c0 -14 2 -19 5 -12 2 6 2 18 0 25 -3 6 -5 1 -5 -13z"
                ></path>
                <path
                  d="M6783 5225 c0 -33 2 -45 4 -27 2 18 2 45 0 60 -2 15 -4 0 -4 -33z"
                ></path>
              </g>
            </svg>
            <span>Église Renouveau</span>
          </a>
        </div>

        <address class="not-italic mb-4 text-gray-300">
          <p>Novotel Demeures de Campagne Orléans Chemins de Sologne</p>
          <p>2 Rue Honoré de Balzac</p>
          <p>45100 Orléans</p>
          <p class="mt-2">
            <a href="tel:+33238000000" class="hover:text-primary-300">
              (+33) 2 38 00 00 00
            </a>
          </p>
          <p>
            <a href="mailto:info@churchname.org" class="hover:text-primary-300">
              contact@renouveau.fr
            </a>
          </p>
        </address>

        <!-- Office Hours -->
        <div class="mt-4 text-gray-300">
          <h4 class="text-sm font-bold mb-2 text-white">Horaires d'ouverture</h4>
          {
            OfficeHoursContent ? (
              <div class="text-sm prose prose-sm prose-invert max-w-none [&_h3]:text-white [&_h3]:text-sm [&_h3]:font-bold [&_h3]:mb-2 [&_ul]:list-none [&_ul]:p-0 [&_li]:mb-1 [&_strong]:text-white">
                <OfficeHoursContent />
              </div>
            ) : (
              <div class="text-sm">
                <p>
                  <strong class="text-white">Lundi - Vendredi :</strong> 9h00 - 17h00
                </p>
                <p>
                  <strong class="text-white">Samedi :</strong> 9h00 - 13h00
                </p>
                <p>
                  <strong class="text-white">Dimanche :</strong> Fermé (sauf cultes)
                </p>
              </div>
            )
          }
        </div>

        <!-- Social Links -->
        <div class="flex space-x-4 mt-6">
          {
            socialLinks.map((link) => (
              <a
                href={link.href}
                target="_blank"
                rel="noopener noreferrer"
                class="text-gray-400 hover:text-white transition-colors"
                aria-label={link.name}
              >
                <Fragment set:html={link.icon} />
              </a>
            ))
          }
        </div>
      </div>

      <!-- Navigation Links -->
      {
        footerNavs.map((group) => (
          <div>
            <h4 class="text-lg font-bold mb-4 text-white">{group.title}</h4>
            <ul class="space-y-2">
              {group.items.map((item) => (
                <li>
                  <a
                    href={item.href}
                    class="text-gray-300 hover:text-primary-300 transition-colors"
                  >
                    {item.text}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>

    <!-- Copyright -->
    <div
      class="pt-8 mt-8 border-t border-gray-800 text-center text-gray-400 text-sm"
    >
      <p>&copy; {currentYear} Église Renouveau. Tous droits réservés.</p>
      <p class="mt-2">
        <a href="/privacy-policy" class="hover:text-primary-300 mr-4"
          >Privacy Policy</a
        >
        <a href="/terms-of-service" class="hover:text-primary-300"
          >Terms of Service</a
        >
      </p>
    </div>
  </div>
</footer>
